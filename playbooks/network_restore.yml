---
- name: restore router configurations
  hosts: network
  gather_facts: no

  tasks:
    - name: retreive configuration from backup-server to execution environment
      ansible.builtin.fetch:
        src: "/backup/{{rollback_date}}/{{inventory_hostname}}"
        dest: "/backup/{{rollback_date}}/{{inventory_hostname}}"
      delegate_to: backup-server

    - name: load restore role
      include_role:
        name: "../roles/restore"
      when: ansible_network_os is defined
